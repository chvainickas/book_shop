<div class="card h-100">
  <% if book.image.attached? %>
    <%= image_tag book.image, class: 'card-img-top', style: 'height: 250px; object-fit: cover;', alt: book.title %>
  <% else %>
    <%= image_tag 'placeholder_book.svg', class: 'card-img-top', style: 'height: 250px; object-fit: contain; padding: 40px; background-color: #f8f9fa;', alt: 'Book placeholder' %>
  <% end %>
  <div class="card-body">
    <h5 class="card-title"><%= book.title %></h5>
    <h6 class="card-subtitle mb-2 text-muted"><%= book.author %></h6>
    <p class="card-text"><%= truncate(book.description, length: 100) if book.description %></p>
    <p class="text-success fw-bold">$<%= book.price %></p>
    <p class="text-muted">Stock: <%= book.stock %></p>
  </div>
  <div class="card-footer bg-transparent">
    <div class="d-flex gap-2">
      <%= link_to 'View', book, class: "btn btn-sm btn-info #{admin? ? 'flex-fill' : 'w-100'}" %>
      <% if admin? %>
        <%= link_to 'Edit', edit_book_path(book), class: 'btn btn-sm btn-warning flex-fill' %>
        <%= button_to 'Delete', book, method: :delete, data: { turbo_confirm: 'Are you sure you want to delete this book?' }, class: 'btn btn-sm btn-danger flex-fill', form: { style: 'flex: 1' } %>
      <% end %>
    </div>
  </div>
</div>
